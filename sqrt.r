q: none

sqrt2: square-root 2

f: make function! [[n /local l m][m: 0 l: (n + m) * sqrt2 l: l - to integer! l l: min l 1 - l r: 2 * l * (n + m) return (r * (sqrt2 - 1)) + r]]




mul: func [m  x y /local a b c d][ a: x/1 b: x/2 c: y/1 d: y/2  return reduce [ reduce [(a * c) - (m * b * d) (a * d) - (b * c)] reduce [(a * c) + (m * b * d) (a * d) + (b * c)]]]


w: [  1 1 3 2 7 5 17 12 41 29 99 70 239 169 577 408 1393 985 3363 2378 8119 5741 19601 13860 47321 33461 114243 80782 275807 195025 ]

; n = 2 x * k * sqrt2


w: clear copy []

insert tail w  [1.0 1.0]

loop 20 [ insert tail w last  mul 2 [ 1.0 1.0 ] skip tail w -2]

x: 1 + sqrt2

;2378 0.0001486767795999544 = 1 / 6726


q: [ 1 3 7 17  41 99 239 577 1393 3363]
{
41  -.017243942703100035
99  .00714267493643
239 -0.0029585928302999775    = 1 / 338 ,338 / 239 = 1.4142259414225942
577 .001225489276            = 1 / 816
1393 -0.0005076142783999593 = 1 / 1970
3363 .000210260719          = 1 / 4756

239

 f (3363 + 41) = 163.99970984714906
 (3363 + 41) * .017033681984000015 * 2 * sqrt2

 (3363 + 41) * (-.017243942703100035 + .000210260719 ) *  2 * sqrt2

  (3363 + 41) *( -0.02438661763950864 +  0.00029735356044411834) = -81.99985492513564 - [81; 1, 6891, 1, 138, 2]

(1 / 6893) =  0.0001450747134774409 = sin(sinh(1/6893))≈0.00014507471347744087777

}

{

1 , 6 - 2 (1 + sqrt(2))≈1.171572875253809902
2 , 12 (1 + sqrt(2)) - 28≈0.970562748477140585 , (4 sqrt(2))/(1 + sqrt(2))^2≈0.970562748477140585
3 , 60 - 24 (1 + sqrt(2))≈2.058874503045718828 , 12/(1 + sqrt(2))^2≈2.058874503045718828,
4 , 48 (1 + sqrt(2)) - 112≈3.882250993908562342
5 , 170 - 70 (1 + sqrt(2))≈1.005050633883346583 , (10 sqrt(2))/(1 + sqrt(2))^3≈1.005050633883346583
6 , 240 - 96 (1 + sqrt(2))≈8.235498012182875315 , 48/(1 + sqrt(2))^2≈8.235498012182875315
7 , 140 (1 + sqrt(2)) - 336≈1.98989873223330683223 , 28/(1 + sqrt(2))^3≈1.98989873223330683223
8 , 432 - 176 (1 + sqrt(2))≈7.098413022335271410
9 , 234 (1 + sqrt(2)) - 558≈6.925973595304241419 , ( 2 * 234 * 234 ) - ( 331 * 331) = -7 * 7 ,

 k = 0.07402640469576005 , 2 * 234 * k * sqrt 2 = 48.9945200914088

k = 49 / 234 / 2 / sqrt 2 = 0.07403468435500177

234 * sqrt 2 = 330.92597359530424 , 1 - .92597359530424 = .07402640469576005

g: func [ n][n: (229 + n) k: 49 / n / 2 / sqrt 2  m: (n * sqrt 2) l: ( m - to-integer m) print [ k " " l " " k - l] k - l ]
g: func [ n][n: (229 + n) k: 49 / n / 2 / sqrt 2  m: (n * sqrt 2) l: ( m - to-integer m) print [ k " " l " " k + l] k + l ]

.4142135623730951 x 0.1715728752538097 x .0710678118654755

0.4138874920524012 x 0.172222204944157

.34444158989478807 / 0.172222204944157 = 1.9999836258424004

.34444158989478807    0.7583290819471893
0.17221938495063108  0.5861124627126107
1.000008279659244    0.4139068008223292



10 , 680 - 280 (1 + sqrt(2))≈4.02020253553338633  
11 , 352 (1 + sqrt(2)) - 836≈13.803173955329457178 , 352 * x = 836 + 13.803173955329457178 , (2 * 352 * 352) - (498 * 498) = -14 * 14

g: func [ n][n: (342 + n) k:  14 * 14 / n / 2 / sqrt 2  m: (n * sqrt 2) l: ( m - to-integer m) print [ k " " l " " k + l] k + l ]



0.4136262643820309 x 0.1727372868775987

0.6909086672641268 / 0.1727372868775987 = 3.999765654266084

0.27728240288209594  0.6909086672641268
1.1045383362722494   0.5181713803865281
0.9318077704273705   0.3454474775505823
0.7590904732425046   1.1727367293155186
0.5863862179030632   1.0000389114552983

12 , 408 (1 + sqrt(2)) - 984≈0.999133448222779911
2 * 12 * 12 * sqrt 2 = 407.2935059634514 , +  1

13 , (468 * x) -  1144 = -14.14805280939163
2 * 13 * 13 * sqrt 2 =  478.0041840821062 , -10

16 , (736 * x ) - 1760 = 16.86118190659795
2 * 16 * 16 * sqrt 2 = 724.0773439350247 , + 12

18 , (900 * x ) -  2196 = 23.207793864214615
2 * 18 * 18 * sqrt 2 = 916.4103884177656 , - 16


g: func [ n][n: (916 + n) k:  23 * 23  / n / 2 / sqrt 2  m: (n * sqrt 2) l: ( m - to-integer m) print [ k " " l " " k + l] k + l ]

0.5914196458703336 x  0.17743021025348257

0.20440409139217683   0.7958237372625104
0.3818343016456594    0.967845357534625
0.6937634142675504    1.107756724505465

find: func [ n ]  [ c: f n for a 1 10000 1 [ for b 1 10000 1 [if 0 = round/to ( a * x ) - b - c 0.0001 [ print [ a " " b ] exit ] ]]]
-------------------------------

2 * 7 * 7 * sqrt 2 = 138.59292911256333 , -1
2 * 8 * 8 * sqrt 2 = 181.01933598375618 , - 5
2 * 9 * 9 * sqrt 2 = 229.1025971044414 , - 5
2 * 100 * sqrt 2 = 282.842712474619  , - 3
2 * 11 * 11 * sqrt 2 = 342.23968209428904  -10


}

{
(f 4)  / ( f 2) = 4
(f 6)  / ( f 3) = 4
(f 10)  / ( f 5) = 4
 (f 14) / (f 7) = 4

(f 1000)  / ( f 500)

f 500 = 151
f 1000 = 604
== 4.0
(f 10000)  / ( f 5000)
== 4.0
(f 1000000)  / ( f 500000)
}


{

2 1  = 1
3 2  = -1
4 3   = 2
6 4   = -4
7 5  =  1
8 6   = -8
10 7  = 2

0.7071067811865475

1 1 1^2-2*1     = -1 , + 1   - 2
2 1 2^2-2*1^2   = 2  , + 3   - 0
3 2                  , + 5   - 6
4 3                  , + 7   - 10
5 4             =-7  , + 9   - 14
6 4             = 4  , + 11  - 0 
7 5            = -1  , + 13  - 18
8 6 8^2-2*6^2 = -8   , + 15  - 22
9 6 9^2-2*6^2 = 9    , + 17  - 0
10 7 10^2-2*7^2 = 2  , + 19  - 26
11 8 11^2-2*8^2 = -7 , + 21  - 30 , (30 + 2) / 4 = 8 , (21 + 1 ) / 2 = 11 , (2 * 8  * 8 ) = sn

  21 * sqrt 2 =   29.698484809834998 = 30    

-7 + 11 = 4
-8 + 17 = 9 
-7 + 23 = 16

a: 1 b: 1 x: 1 y: z: 2 n: -1 for c 2 100 1 [ x: x + 2 d: round c / sqrt 2 either b <> d [ z: y: z + 4][y: 0 ] a: c b: d  n: n + x - y print [ c " " d " " x " " y " " n] ]

41   29.0   81   114   -1
42   30.0   83   118   -36 , mod 5 = 1 

58   41.0   115   162   2
59   42.0   117   166   -47 , mod 5 = 2 

82   58.0   163   230   -4
83   59.0   165   234   -73  , mod 5 = 3

116   82.0   231   326   8
117   83.0   233   330   -89  . mod 5 = 4

164   116.0   327   462   -16
165   117.0   329   466   -153 , mod 5 = 3

232   164.0   463   654   32
233   165.0   465   658   -161 , mod 5 = 1

328   232.0   655   926   -64 = (41,29)*2^8
329   233.0   657   930   -337 , mod 5 = 2
========================



1
2 = 3 - 1
3
4 = 3 + 1
5 = 7 - 3 + 1
6 = 7 - 1
7
8  = 7 + 1
9 = 7 + 3 - 1
10 = 7 + 3
11 = 7 + 3 + 1
12 = 17 - 7 + 3 - 1
13 = 17 - 3 - 1
14 = 17 - 3
15 = 17 - 3 + 1
16 = 17 - 1
17
18 = 17 + 1
19 = 17 + 3 + 1
20 = 17 + 3
21 = 17 + 3 + 1

99   70.0   197   278   1
100   71.0   199   282   -82

140   99.0   279   394   -2
141   100.0   281   398   -119
                       
}
halt
